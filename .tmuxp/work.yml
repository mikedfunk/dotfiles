# tmuxp window layout for work https://github.com/tmux-python/tmuxp
# vim: set foldmethod=marker:
session_name: Work
windows:

# config {{{
  - window_name: config
    start_directory: ~/.yadm
    layout: main-horizontal
    options:
      main-pane-height: 40
      focus: true
    panes:
      - shell_command:
        - v -S
        focus: true
      # - yadm st
      - while true; do clear && yadm st; sleep 60; done
      # - wait-on http://www.local.saatchiart.com && docker-stats
      # - sourcegraph
      - while true; do wait-on http://www.local.saatchiart.com && dme && ctop; sleep 10; done
      - htop
# }}}

# legacy {{{
  - window_name: legacy
    start_directory: ~/Code/saatchi/legacy
    layout: main-horizontal
    options:
      main-pane-height: 40
    panes:
      - shell_command:
        - v +GitSessionLoad
        focus: true
      - ts
      - while true; do wait-on http://www.local.saatchiart.com && saatchi-tinker-legacy-local; sleep 10; done
      - while true; do puw; sleep 10; done
      - wd legacy && cd ./assets/react && yarn && yarn write-rev && yarn start
      # - saatchi-eslint-watch-legacy
      # - saatchi-grunt-watch-legacy
      - while true; do wait-on http://www.local.saatchiart.com && saatchi-tail-legacy-local; sleep 10; done
# }}}

# easel {{{
  - window_name: easel
    start_directory: ~/Code/saatchi/easel
    layout: main-horizontal
    options:
      main-pane-height: 40
    panes:
      - shell_command:
        - v +GitSessionLoad
        focus: true
      - ts
      - yarn jest --watchAll
      - while true; do wait-on http://www.local.saatchiart.com && saatchi-tail-easel-local; sleep 10; done
# }}}

# gallery {{{
  - window_name: gallery
    start_directory: ~/Code/saatchi/gallery
    layout: main-horizontal
    options:
      main-pane-height: 40
    panes:
      - shell_command:
        - v +GitSessionLoad
        focus: true
      - ts
      - while true; do wait-on http://www.local.saatchiart.com && saatchi-tinker-gallery-local; sleep 10; done
      - while true; do puw; sleep 10; done
      - yarn jest --watch
      - saatchi-gulp-watch-gallery
        # - saatchi-start-gallery
      - while true; do wait-on http://www.local.saatchiart.com && saatchi-tail-gallery-local; sleep 10; done
# }}}

# palette {{{
  - window_name: palette
    start_directory: ~/Code/saatchi/palette
    layout: main-horizontal
    options:
      main-pane-height: 40
    panes:
      - shell_command:
        - v +GitSessionLoad
        focus: true
      - ts
      - while true; do wait-on http://www.local.saatchiart.com && saatchi-tinker-palette-local; sleep 10; done
      - while true; do psw; sleep 10; done
      # - saatchi-phing-watch
      - while true; do wait-on http://www.local.saatchiart.com && saatchi-tail-palette-local; sleep 10; done
# }}}

# zed {{{
  - window_name: zed
    start_directory: ~/Code/saatchi/zed
    layout: main-horizontal
    options:
      main-pane-height: 40
    panes:
      - shell_command:
        - v +GitSessionLoad
        focus: true
      - ts
      - while true; do wait-on http://www.local.saatchiart.com && saatchi-phpunit-watch-zed; sleep 10; done
      - saatchi-grunt-watch-zed
      - while true; do wait-on http://www.local.saatchiart.com && saatchi-tail-zed-local; sleep 10; done
# }}}

# catalog {{{
  - window_name: catalog
    start_directory: ~/Code/saatchi/catalog
    layout: main-horizontal
    options:
      main-pane-height: 40
    panes:
      - shell_command:
        - v +GitSessionLoad
        focus: true
      - ts
      - while true; do wait-on http://www.local.saatchiart.com && saatchi-tinker-catalog-local; sleep 10; done
      - while true; do wait-on http://www.local.saatchiart.com && saatchi-tail-catalog-local; sleep 10; done
# }}}

# views (disabled) {{{
  # - window_name: views
  #   start_directory: ~/Code/saatchi/couchbase-views
  #   layout: main-horizontal
  #   options:
  #     main-pane-height: 40
  #   panes:
  #     - shell_command:
  #       - v -S
  #       focus: true
  #     - ts
# }}}

# xdocker {{{
  - window_name: xdocker
    start_directory: ~/Code/saatchi/xdocker
    layout: main-horizontal
    options:
      main-pane-height: 40
    panes:
      - v -S
      - shell_command:
        - saatchi-docker-start
        focus: true
      - ts
# }}}

# xpuppet {{{
  - window_name: xpuppet
    start_directory: ~/Code/saatchi/gitlab-puppet
    layout: main-horizontal
    options:
      main-pane-height: 40
    panes:
      - shell_command:
        - v -S
        focus: true
      - ts
# }}}

# mysql {{{
  - window_name: mysql
    start_directory: ~/Code/saatchi/queries
    layout: main-vertical
    options:
      main-pane-width: 100
    panes:
      - v -S
      - shell_command:
        - wait-on http://www.local.saatchiart.com && saatchi-mycli-legacy-local
        focus: true
      - wait-on http://www.local.saatchiart.com && saatchi-mycli-palette-local
      - wait-on http://www.local.saatchiart.com && saatchi-mycli-zed-local
# }}}

# http {{{
  - panes:
      - v -S
    start_directory: ~/Code/saatchi/http
    window_name: http
# }}}

# notes {{{
  - window_name: notes
    start_directory: ~/.config/joplin
    panes:
      - notes
# }}}

# uml {{{
  - window_name: uml
    start_directory: ~/Code/uml
    layout: main-horizontal
    options:
      main-pane-height: 40
    panes:
      - shell_command:
        - v -S
        focus: true
      - ts
      - . ./watch.sh
# }}}

# maropost php sdk (disabled) {{{
  # - window_name: maropost
  #   start_directory: ~/Code/saatchi/maropost-php-sdk
  #   layout: main-horizontal
  #   options:
  #     main-pane-height: 40
  #   panes:
  #     - shell_command:
  #       - v -S
  #       focus: true
  #     - ts
# }}}

# releases (xdev|xqa|xprod) {{{
  - window_name: releases
    layout: even-vertical
    options:
      pane-border-status: top
    panes:
      # printf sets pane name. alternative, wasn't as reliable for me:
      # tmux select-pane -t 5 -T 'MY_PANE_NAME'
      - printf "\033]2;%s\033\\r:r" 'xdev' && saatchi-releases-xdev --watch --clear
      - printf "\033]2;%s\033\\r:r" 'xqa' && saatchi-releases-xqa --watch --clear
      - printf "\033]2;%s\033\\r:r" 'xprod' && saatchi-releases-xprod --watch --clear
# }}}

# logs (prod) {{{
  - window_name: logs
    start_directory: ~/
    layout: tiled
    options:
      pane-border-status: top
    panes:
      # printf sets pane name. alternative, wasn't as reliable for me:
      # tmux select-pane -t 5 -T 'MY_PANE_NAME'
      - printf "\033]2;%s\033\\r:r" 'easel' && saatchi-tail-easel-xprod
      - printf "\033]2;%s\033\\r:r" 'gallery' && saatchi-tail-gallery-xprod
      - printf "\033]2;%s\033\\r:r" 'palette' && saatchi-tail-palette-xprod
      - printf "\033]2;%s\033\\r:r" 'legacy' && saatchi-tail-legacy-xprod
      - printf "\033]2;%s\033\\r:r" 'zed' && saatchi-tail-zed-xprod
      - printf "\033]2;%s\033\\r:r" 'mjmship' && mjm-tail-app-prod
      # - saatchi-tail-legacy-services-xprod
# }}}

# chromatic (iOS app) (disabled) {{{
  # - window_name: chromatic
  #   start_directory: ~/Code/saatchi/chromatic
  #   layout: main-horizontal
  #   options:
  #     main-pane-height: 40
  #   panes:
  #     - shell_command:
  #       - v -S
  #       focus: true
  #     - ts
# }}}
