# vim: set foldmethod=marker:
# tmux window layout setup
name: Work
windows:

# config {{{
  - config:
      root: ~/.yadm
      layout: main-horizontal
      panes:
        - v -S
        - yadm st
        - wait-on http://www.local.saatchiart.com && docker-stats
        # if sourcegraph is running, attach, else run it
        - ( docker ps | grep sourcegraph ) && docker logs --follow $( docker ps | grep "sourcegraph\/server" | awk '{print $1}' ) || sourcegraph
        - htop
# }}}

# legacy {{{
  - legacy:
      root: ~/Code/saatchi/legacy
      layout: main-horizontal
      panes:
        - v
        - ts
        - puw
        - cd ~/Code/saatchi/legacy/assets/react && yarn && yarn start
        - saatchi-grunt-watch-legacy
        - wait-on http://www.local.saatchiart.com && saatchi-tail-legacy-local
# }}}

# easel {{{
  - easel:
      root: ~/Code/saatchi/easel
      layout: main-horizontal
      panes:
        - v
        - ts
        - yarn jest --watchAll
        - wait-on http://www.local.saatchiart.com && saatchi-attach-easel-node
# }}}

# gallery {{{
  - gallery:
      root: ~/Code/saatchi/gallery
      layout: main-horizontal
      panes:
        - v
        - ts
        - puw
        - yarn jest --watch
        - yarn gulp
        - wait-on http://www.local.saatchiart.com && saatchi-tail-gallery-local
# }}}

# palette {{{
  - palette:
      root: ~/Code/saatchi/palette
      layout: main-horizontal
      panes:
        - v
        - ts
        - psw
        - saatchi-phing-watch
        - wait-on http://www.local.saatchiart.com && saatchi-tail-palette-local
# }}}

# zed {{{
  - zed:
      root: ~/Code/saatchi/zed
      layout: main-horizontal
      panes:
        - v
        - ts
        - wait-on http://www.local.saatchiart.com && saatchi-phpunit-watch-zed
        - saatchi-grunt-watch-zed
        - wait-on http://www.local.saatchiart.com && saatchi-tail-zed-local
# }}}

# catalog {{{
  - catalog:
      root: ~/Code/saatchi/catalog
      layout: main-horizontal
      panes:
        - v
        - ts
        - wait-on http://www.local.saatchiart.com && saatchi-tail-catalog-local
# }}}

# views {{{
  - views:
      root: ~/Code/saatchi/couchbase-views
      layout: main-horizontal
      panes:
        - v -S
        - ts
# }}}

# xdocker {{{
  - xdocker:
      root: ~/Code/saatchi/xdocker
      layout: main-horizontal
      panes:
        - v -S
        - saatchi-docker-start
        - ts
# }}}

# xpuppet {{{
  - xpuppet:
      root: ~/Code/saatchi/xpuppet
      layout: main-horizontal
      panes:
        - v -S
        - ts
# }}}

# mysql {{{
  - mysql:
      root: ~/Code/saatchi/queries
      layout: main-vertical
      panes:
        - v -S
        - wait-on http://www.local.saatchiart.com && saatchi-mycli-legacy-local
        - wait-on http://www.local.saatchiart.com && saatchi-mycli-palette-local
        - wait-on http://www.local.saatchiart.com && saatchi-mycli-zed-local
# }}}

# http {{{
  - http:
      root: ~/Code/saatchi/http
      panes:
        - v -S
# }}}

# notes {{{
  - notes: joplin
# }}}

# releases {{{
  - releases:
      layout: even-horizontal
      panes:
        - saatchi-releases-xdev --watch --clear
        - saatchi-releases-xqa --watch --clear
        - saatchi-releases-xprod --watch --clear
# }}}

# uml {{{
  - uml:
      root: ~/Code/uml
      layout: main-horizontal
      panes:
        - v -S
        - ts
        - . ./watchi.sh
# }}}
