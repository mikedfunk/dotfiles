# vim:foldmethod=marker:

# settings {{{
# all refresh modes are broken right now :(
# https://github.com/jonas/tig/issues/794
# set refresh-mode = periodic
# set refresh-interval = 1
set refresh-mode = auto
set mailmap = true
set line-graphics = utf-8
# set diff-highlight = true
set mouse = true
set mouse-wheel-cursor = true
# set ignore-space = yes
set main-view = line-number:no,interval=5 \
    id:no,color=yes \
    date:relative,local=no,format= \
    author:full \
    commit-title:yes,graph=v2,refs=yes
set refs-view = line-number:no \
    id:no,color=yes \
    date:relative,local=no,format= \
    author:full \
    ref \
    commit-title:yes,graph=no,refs=no
# }}}

# bindings {{{
# Cherry-pick current commit onto current branch (C in main view)
bind main C !git cherry-pick %(commit)

bind status S !git push
bind status L !git pull
# Go to the first file in the status view
bind status <Ctrl-n> :/^.$
bind status O !git open

bind pager <Ctrl-n> :/^commit
bind pager <Ctrl-p> :?^commit

# quickly jump to the next diff chunk in the stage view (Enter in stage view)
bind stage <Enter> :/^@@

# Reload ~/.tigrc when 'S' is pressed
# bind generic S :source .tigrc
# TODO map something to checkout the current file from develop
#
# create a new branch (b in refs view)
bind refs n !@git branch "%(prompt Enter branch name: )"

# amend last commit  (+ in any view)
bind generic + !git commit --amend
# open the commit on github (B in main view)
bind generic B @sh -c "open 'https://'$(git remote -v | grep -Eo 'github.com[:/][^.]+' | head -1 | tr : /)'/commit/%(commit)'"
# Go back to the previous view state
bind generic <C-O> back
# Close all views and quit
bind generic ZZ quit
# Focus the next view
# bind generic <Tab> view-next
bind generic <C-W>n view-next
bind generic <C-W>p view-previous
bind generic gg move-first-line
bind generic G move-last-line
bind generic <C-U> move-half-page-up
bind generic <C-D> move-half-page-down
bind generic zh scroll-left
bind generic zl scroll-right
# bind generic <C-Y> scroll-line-up
# bind generic <C-E> scroll-line-down
# bind generic <C-B> scroll-page-up
# bind generic <C-F> scroll-page-down

# https://github.com/jonas/tig/wiki/Bindings
# move in diff view with arrow keys (up or down in diff view)
# bind diff <Up> move-up
# bind diff <Down> move-down
# revert (! in main view)
# bind main ! !git revert %(commit)
# }}}

# colorscheme {{{
# TODO
# }}}
